<html>
<head>
  <title>CV Guy Tokarski</title>
  
  <style>
body {
  background-color: white;
  font-family: Garamond, serif;
  margin: 10px;
}

h1 {	
  font-family: Garamond, serif;
  font-size: 40px;
  font-weight: bold;
  color: darkblue;
  margin-left: 40px;
  letter-spacing: 6px;
}

h2 {
  font-family: Arial, sans-serif;
  color: darkblue;
  background-color: goldenrod;
  margin: 0px;
  text-align: center;
  margin-bottom : 10px;
}

#table-experience h3 {
  font-family: Garamond, serif;
  color: darkblue;
  margin: 0px;
}

#table-formation h3 {
  font-family: Garamond, serif;
  color: darkgreen;
  margin: 0px;
}

p {
  margin: 0px;
}

#table-experience .column-year {
  background-color: steelblue;
  color: white;
  width: 200px;
  vertical-align: top;
  text-align: right;
}

#table-formation .column-year {
  background-color: seagreen;
  color: white;
  width: 200px;
  vertical-align: top;
  text-align: right;
}


.annee-dates {
	margin-right: 10px;
}
.annee-loc {
	margin-right: 10px;
}


.column-expe {
  
}

.expe-employeur {
  font-family: Arial, sans-serif;
  font-size: 14px;
  color: darkblue;
  text-transform: uppercase;
}

.expe-poste {
  font-family: Arial, sans-serif;
  color: grey;
}

.expe-desc {
	margin-bottom: 5px;
}

.legend {
	margin: auto;
}

#contact {
  background-color: linen;
  line-height: 1.7;
  margin-left: 5px;
}

#contact span {
  margin-left: 5px;
}

.citation {
  font-weight: bold;
  text-align: center;
  font-style: italic;
  
}

</style>

  <script src="js/d3.v7.min.js"></script>
  <script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="js/cloud.js"></script>
</head>
<body>
    
  <div id="cv" style="width:21cm; height: 29.7cm;">
	<div id="title-name" style="text-align: center">
		<h1>Guy Tokarski</h1>
	</div>
	<div id="cloud" style="width: 11cm; float: right;">
    </div>
	<div id="contact" style="width: 9cm; text-align: left">
		<div id="title-contact" style="text-align: left">
			<h2>Analyste / Développeur</h2>
			<p class="citation">10 ans d'Expériences en développement Web</p>
		</div>
		<div id="detail-contact" style="text-align: left">
			<span><b>adr: </b>10, route de Cotfa 74960 MEYTHET</span><br>
			<span><b>tel: </b>06.89.59.10.43</span><br>
			<span><b>e-mail: </b>guytokarski@gmail.com</span><br>
			<span><b>43 ans</b>, Permis B</span><br>
			<span><b>langues: </b>anglais (courant)</span><br>
			<span><b>Loisirs, intérêts: </b>Géographie, Histoire, Pétanque, Tarot, Randonnées, Jardinage</span><br>
		</div>
	</div>
	<div id="content" style="clear: both;">	
	<table id="table-experience">
		<thead>
			<tr>
				<th class="column-year">
					<p class="annee-dates">EXPERIENCE</p>					
				</th>
				<th class="column-expe">					
				</th>
			</tr>
		</thead>
		
		<tbody>
			<tr>
				<td class="column-year">
					<p class="annee-dates">2020-2023</p>
					<p class="annee-loc">Annecy (74)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">Resistarc</h3>
					<p class="expe-poste">Monteur</p>
					<p class="expe-desc">Assemblage de pièces métalliques, pose rivets, rivkles, vis... Participation à la migration de l'ERP</p>
				</td>
			</tr>
			<tr>
				<td class="column-year">
					<p class="annee-dates">Mai 2019 - Janvier 2020</p>
					<p class="annee-loc">Annecy (74)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">2L Multimedia</h3>
					<p class="expe-poste">Analyste/Développeur</p>
					<p class="expe-desc">Maintenance de sites de rencontres (PHP7)</p>
				</td>
			</tr>
			<tr>
				<td class="column-year">
					<p class="annee-dates">Avril 2015 - Octobre 2018</p>
					<p class="annee-loc">Genève (CH)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">Blue Infinity</h3>
					<p class="expe-poste">Analyste/Développeur</p>
					<p class="expe-desc">Programmation, maintenance sur les sites marketing et e-commerce sur CS-Cart(pour Philip Morris International, Ulysse Nardin, Chocolats Villars…) et autres CMS (pour Romande Energie, Caran d’Ache, Lansa...)</p>
				</td>
			</tr>
			<tr>
				<td class="column-year">
					<p class="annee-dates">Juin - Novembre 2014</p>
					<p class="annee-loc">Annecy (74)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">Altimax</h3>
					<p class="expe-poste">Analyste/Développeur</p>
					<p class="expe-desc">Développement de composants Joomla! servant à l'administration de 3 sites web dans le domaine de réservation en ligne de locations immobilères.</p>
				</td>
			</tr>
			<tr>
				<td class="column-year">
					<p class="annee-dates">Octobre 2012 - Juin 2014</p>
					<p class="annee-loc">Grenoble (38)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">Alteca</h3>
					<p class="expe-poste">Consultant, chargé de projets, développeur</p>
					<p class="expe-desc">Développement de 2 sites intranets (pour UPMF) sous Zend Framework; Gestionnaire de 6 applications en TMA pour 4 clients</p>
				</td>
			</tr>
			<tr>
				<td class="column-year">
					<p class="annee-dates">Septembre 2009 - Octobre 2012</p>
					<p class="annee-loc">Annecy (74)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">NTN-SNR Roulements</h3>
					<p class="expe-poste">Consultant, chargé de projets, développeur</p>
					<p class="expe-desc">Développement et maintenance de sites intranets de gestion (Gestion des Produits Chimiques, Gestion de Réclamations, Gestion des Heures Collaborateurs...)</p>
				</td>
			</tr>
			<tr>
				<td class="column-year">
					<p class="annee-dates">2008 - 2009</p>
					<p class="annee-loc">Grenoble (38)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">Ecole de la Paix</h3>
					<p class="expe-poste">Stage SIG et développement web</p>
					<p class="expe-desc">Programmation de PeacePRISM (cartographie de données socio-politiques).</p>
				</td>
			</tr>
		</tbody>	
	</table>
	
	<table id="table-formation">
		<thead>
			<tr>
				<th class="column-year">
					<p class="annee-dates">FORMATION</p>	
					
				</th>
				<th class="column-expe">					
				</th>
			</tr>
		</thead>
		
		<tbody>
			<tr>
				<td class="column-year">
					<p class="annee-dates">2006 - 2008</p>
					<p class="annee-loc">Saint-Etienne (42)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">Master 2 : Systèmes d'Information Géographique</h3>
					<p class="expe-poste">université de Saint-Etienne</p>
				</td>
			</tr>
			<tr>
				<td class="column-year">
					<p class="annee-dates">2002 - 2005</p>
					<p class="annee-loc">Dijon (21)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">DEUG et Licence de Géographie</h3>
					<p class="expe-poste">Université de Dijon</p>
				</td>
			</tr>
			<tr>
				<td class="column-year">
					<p class="annee-dates">1999 - 2001</p>
					<p class="annee-loc">Sens (89)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">BTS Informatique</h3>
					<p class="expe-poste">Lycée Marie Curie</p>
				</td>
			</tr>
			<tr>
				<td class="column-year">
					<p class="annee-dates">1998 - 1999</p>
					<p class="annee-loc">Sens (89)</p>					
				</td>
				<td class="column-expe">
					<h3 class="expe-employeur">BAC S</h3>
					<p class="expe-poste">Lycée Marie Curie</p>
				</td>
			</tr>
			
		</tbody>	
	</table>
    </div>
	
  </div>
  
  <script>
	function legend({
	  color,
	  title,
	  tickSize = 6,
	  width = 260,
	  height = 44 + tickSize,
	  marginTop = 18,
	  marginRight = 0,
	  marginBottom = 16 + tickSize,
	  marginLeft = 0,
	  ticks = width / 64,
	  tickFormat,
	  tickValues
	} = {}) {
	  const svg = d3.create("svg")
		.attr("width", width)
		.attr("height", height)
		.attr("viewBox", [0, 0, width, height])
		.style("overflow", "visible")
		.style("display", "block");
	  svg.node().classList.add('legend')
	  let tickAdjust = g => g.selectAll(".tick line").attr("y1", marginTop + marginBottom - height);
	  let x;

	  // Continuous
	  if (color.interpolate) {
		const n = Math.min(color.domain().length, color.range().length);

		x = color.copy().rangeRound(d3.quantize(d3.interpolate(marginLeft, width - marginRight), n));

		svg.append("image")
		  .attr("x", marginLeft)
		  .attr("y", marginTop)
		  .attr("width", width - marginLeft - marginRight)
		  .attr("height", height - marginTop - marginBottom)
		  .attr("preserveAspectRatio", "none")
		  .attr("xlink:href", ramp(color.copy().domain(d3.quantize(d3.interpolate(0, 1), n))).toDataURL());
	  }

	  // Sequential
	  else if (color.interpolator) {
		x = Object.assign(color.copy()
		  .interpolator(d3.interpolateRound(marginLeft, width - marginRight)), {
			range() {
			  return [marginLeft, width - marginRight];
			}
		  });

		svg.append("image")
		  .attr("x", marginLeft)
		  .attr("y", marginTop)
		  .attr("width", width - marginLeft - marginRight)
		  .attr("height", height - marginTop - marginBottom)
		  .attr("preserveAspectRatio", "none")
		  .attr("xlink:href", ramp(color.interpolator()).toDataURL());

		// scaleSequentialQuantile doesn’t implement ticks or tickFormat.
		if (!x.ticks) {
		  if (tickValues === undefined) {
			const n = Math.round(ticks + 1);
			tickValues = d3.range(n).map(i => d3.quantile(color.domain(), i / (n - 1)));
		  }
		  if (typeof tickFormat !== "function") {
			tickFormat = d3.format(tickFormat === undefined ? ",f" : tickFormat);
		  }
		}
	  }

	  // Threshold
	  else if (color.invertExtent) {
		const thresholds = color.thresholds ? color.thresholds() // scaleQuantize
		  :
		  color.quantiles ? color.quantiles() // scaleQuantile
		  :
		  color.domain(); // scaleThreshold

		const thresholdFormat = tickFormat === undefined ? d => d :
		  typeof tickFormat === "string" ? d3.format(tickFormat) :
		  tickFormat;

		x = d3.scaleLinear()
		  .domain([-1, color.range().length - 1])
		  .rangeRound([marginLeft, width - marginRight]);

		svg.append("g")
		  .selectAll("rect")
		  .data(color.range())
		  .join("rect")
		  .attr("x", (d, i) => x(i - 1))
		  .attr("y", marginTop)
		  .attr("width", (d, i) => x(i) - x(i - 1))
		  .attr("height", height - marginTop - marginBottom)
		  .attr("fill", d => d);

		tickValues = d3.range(thresholds.length);
		tickFormat = i => thresholdFormat(thresholds[i], i);
	  }

	  // Ordinal
	  else {
		x = d3.scaleBand()
		  .domain(color.domain())
		  .rangeRound([marginLeft, width - marginRight]);

		svg.append("g")
		  .selectAll("rect")
		  .data(color.domain())
		  .join("rect")
		  .attr("x", x)
		  .attr("y", marginTop)
		  .attr("width", Math.max(0, x.bandwidth() - 1))
		  .attr("height", height - marginTop - marginBottom)
		  .attr("fill", color);

		tickAdjust = () => {};
	  }

	  svg.append("g")
		.attr("transform", `translate(0,${height - marginBottom})`)
		.call(d3.axisBottom(x)
		  .ticks(ticks, typeof tickFormat === "string" ? tickFormat : undefined)
		  .tickFormat(typeof tickFormat === "function" ? tickFormat : undefined)
		  .tickSize(tickSize)
		  .tickValues(tickValues))
		.call(tickAdjust)
		.call(g => g.select(".domain").remove())
		.call(g => g.append("text")
		  .attr("x", marginLeft)
		  .attr("y", marginTop + marginBottom - height - 6)
		  .attr("fill", "currentColor")
		  .attr("text-anchor", "start")
		  .attr("font-weight", "bold")
		  .text(title));

	  return svg.node();
	}

	function ramp(color, n = 256) {
	  var canvas = document.createElement('canvas');
	  canvas.width = n;
	  canvas.height = 1;
	  const context = canvas.getContext("2d");
	  for (let i = 0; i < n; ++i) {
		context.fillStyle = color(i / (n - 1));
		context.fillRect(i, 0, 1, 1);
	  }
	  return canvas;
	}

		
  const myProjects = [
    {pNom: "Cours BTS Info", pClient: "Lycee", pEmployeur: "Lycee", pAnnee :"1999", pTechno: "Assembleur, C, C++, Grafcet, HTTP, HTML, Linux, Dos", pNbJours: "200"},
	{pNom: "Bibliotheque photos", pClient: "Spack System", pEmployeur: "Spack System", pAnnee :"1999", pTechno: "Access, VisualBasic, Word", pNbJours: "15"},
	{pNom: "Codification produits", pClient: "Spack System", pEmployeur: "Spack System", pAnnee :"1999", pTechno: "Access, VisualBasic, Powerpoint", pNbJours: "15"},
	{pNom: "Pilotage machine à graver les circuits imprimés", pClient: "Lycee", pEmployeur: "Lycee", pAnnee :"2000", pTechno: "C, HTTP", pNbJours: "120"},
	{pNom: "Base vins", pClient: "Vins de bougogne", pEmployeur: "Vins de bougogne", pAnnee :"2006", pTechno: "Access", pNbJours: "15"},
	{pNom: "Cours Master2 SIG", pClient: "Université", pEmployeur: "Université", pAnnee :"2006", pTechno: "Python, ArcGis, GeoConcept", pNbJours:"100"},
	{pNom: "PeacePRISM", pClient: "Ecole de la paix", pEmployeur: "Université", pAnnee :"2009", pTechno: "RubyOnRails, ScripaculousJS, CSS2, PostGreSQL, Ubuntu, SVG, VML, SVN", pNbJours: "150"},
	{pNom: "Gestion des produits Chimiques", pClient: "NTN-SNR", pEmployeur: "Alteca", pAnnee :"2011", pTechno: "ZendFramework, PHP5, MySQL, JQuery, CSS2, Ubuntu, Git, Raphael, jQGrid", pNbJours: "170"},
	{pNom: "Gestion des Réclamations Fournisseurs", pClient: "NTN-SNR", pEmployeur: "Alteca", pAnnee :"2011", pTechno: "ZendFramework, PHP5, MySQL, JQuery, CSS2, Ubuntu, Git, CRUD", pNbJours: "30"},
	{pNom: "Gestion des Réclamations Clients", pClient: "NTN-SNR", pEmployeur: "Alteca", pAnnee :"2012", pTechno: "ZendFramework, PHP5, MySQL, JQuery, CSS2, Ubuntu, Git", pNbJours: "30"},
	{pNom: "Gestion des Cas Produits", pClient: "NTN-SNR", pEmployeur: "Alteca", pAnnee :"2012", pTechno: "ZendFramework, PHP5, MySQL, JQuery, CSS2, Ubuntu", pNbJours: "30"},
	{pNom: "Gestion des Heures Collaborateurs", pClient: "NTN-SNR", pEmployeur: "Alteca", pAnnee :"2010", pTechno: "ZendFramework, PHP5, MySQL, JQuery, CSS2, Ubuntu, Jenkins", pNbJours: "80"},
	{pNom: "Maintenance", pClient: "NTN-SNR", pEmployeur: "Alteca", pAnnee :"2010", pTechno: "ViWorkflow, Javascript, WindowsXP", pNbJours: "100"},
	{pNom: "Gestion fiches collaborateurs", pClient: "Conseil Général Isère", pEmployeur: "Alteca", pAnnee :"2012", pTechno: "WindowsXP, Windev, SQLServer", pNbJours: "20"},
	{pNom: "Gestion fiche bleue", pClient: "Conseil Général Isère", pEmployeur: "Alteca", pAnnee :"2013", pTechno: "WindowsXP, Windev, SQLServer", pNbJours: "30"},
	{pNom: "TMA Conseil Général", pClient: "Conseil Général Isère", pEmployeur: "Alteca", pAnnee :"2013", pTechno: "WindowsXP, Windev, SQLServer", pNbJours: "20"},
	{pNom: "TMA Ville de Grenable", pClient: "Ville de Grenoble", pEmployeur: "Alteca", pAnnee :"2013", pTechno: "WindowsXP, Windev, SQLServer", pNbJours: "20"},
	{pNom: "TMA UPMF", pClient: "UPMF Grenoble", pEmployeur: "Alteca", pAnnee :"2010", pTechno: "PHP5, MySQL, JQuery, CSS", pNbJours: "20"},
	{pNom: "Gestion des gazs à effets de serre", pClient: "UPMF Grenoble", pEmployeur: "Alteca", pAnnee :"2014", pTechno: "ZendFramework, PHP5, MySQL, JQuery, Ajax, CSS, Excel, XHTML, Git", pNbJours: "60"},	
	{pNom: "ISEA", pClient: "UPMF Grenoble", pEmployeur: "Alteca", pAnnee :"2012", pTechno: "ZendFramework, PHP5, MySQL, JQuery, CSS2, SVN", pNbJours: "20"},
	{pNom: "TMA Euromaster", pClient: "UPMF Grenoble", pEmployeur: "Alteca", pAnnee :"2011", pTechno: "PHP5, MySQL, JQuery, CSS2, SVN", pNbJours: "20"},
	{pNom: "TMA Catalogue Campings", pClient: "Campings de France", pEmployeur: "Alteca", pAnnee :"2010", pTechno: "PHP5, MySQL, JQuery, CSS2, SVN", pNbJours: "20"},
	{pNom: "TMA Carrefour", pClient: "Carrefour", pEmployeur: "Alteca", pAnnee :"2012", pTechno: "PHP5, MySQL, JQuery, CSS2, SVN", pNbJours: "20"},
	{pNom: "Haute-Savoie Habitat", pClient: "Haute-Savoie Habitat", pEmployeur: "Alteca", pAnnee :"2013", pTechno: "Symfony2, MySQL, JQuery, CSS2, Git", pNbJours: "50"},
	{pNom: "Formation GoogleEarthAPI", pClient: "Ville de Grenoble", pEmployeur: "Alteca", pAnnee :"2013", pTechno: "GoogleEarthAPI, PostGIS", pNbJours: "5"},
	{pNom: "Formation Javascript JqueryUI", pClient: "UPMF Grenoble", pEmployeur: "Alteca", pAnnee :"2014", pTechno: "JQuery, ZendFramework, nginx, Ajax", pNbJours: "5"},
	{pNom: "Gestion plaques Silice", pClient: "CEA", pEmployeur: "Alteca", pAnnee :"2014", pTechno: "ZendFramework, PHP5, MySQL, JQuery, CSS2, Git", pNbJours: "30"},	
	{pNom: "Maintenance", pClient: "Altimax", pEmployeur: "Altimax", pAnnee :"2014", pTechno: "WordPress", pNbJours: "20"},
	{pNom: "Location 2Alpes", pClient: "2Alpes", pEmployeur: "Altimax", pAnnee :"2014", pTechno: "Joomla, CSS3, JQuery, MySQL", pNbJours: "30"},
	{pNom: "Location Provence", pClient: "Plaisirs de provence", pEmployeur: "Altimax", pAnnee :"2014", pTechno: "Joomla, CSS3, JQuery, MySQL", pNbJours: "30"},
	{pNom: "Module Arkiane", pClient: "Altimax", pEmployeur: "Altimax", pAnnee :"2014", pTechno: "Zend2, REST, SOAP, MySQL, Git, API", pNbJours: "50"},	
	{pNom: "Gestion Aeroport", pClient: "ADSoftware", pEmployeur: "ADSoftware", pAnnee :"2015", pTechno: "SQLServer", pNbJours: "50"},	
	{pNom: "IQOS Retailers", pClient: "Philippe Morris Intl", pEmployeur: "Blue Infinity", pAnnee :"2017", pTechno: "Scrum, CSCart, MySQL, PHP7, CSS3, Jira, Confluence, Angular, Git", pNbJours: "200"},	
	{pNom: "Module import Lansa", pClient: "Lansa", pEmployeur: "Blue Infinity", pAnnee :"2018", pTechno: "PrestaShop, PHP7, CSS3, NPM, SOAP, XML", pNbJours: "15"},	
	{pNom: "Maintenance Site", pClient: "Ulysse-nardin", pEmployeur: "Blue Infinity", pAnnee :"2017", pTechno: "CSCart, PHP7, CSS3, JqueryUI", pNbJours: "10"},
	{pNom: "Refonte site Apres-vente", pClient: "Ulysse-nardin", pEmployeur: "Blue Infinity", pAnnee :"2017", pTechno: "CSCart, PHP7, CSS3, JqueryUI", pNbJours: "30"},
	{pNom: "Maintenance Site", pClient: "Vacheron-Constatin", pEmployeur: "Blue Infinity", pAnnee :"2017", pTechno: "Drupal, PHP7, CSS3, JqueryUI", pNbJours: "5"},
	{pNom: "Maintenance Site", pClient: "Chocolats Villars", pEmployeur: "Blue Infinity", pAnnee :"2017", pTechno: "CSCart, PHP7, less, JqueryUI", pNbJours: "25"},
	{pNom: "Refonte Site", pClient: "Neidhart", pEmployeur: "Blue Infinity", pAnnee :"2017", pTechno: "CSCart, PHP7, CSS3, MariaDB, JqueryUI", pNbJours: "30"},
	{pNom: "Maintenance Site", pClient: "Soleil Rouge", pEmployeur: "Blue Infinity", pAnnee :"2017", pTechno: "CSCart, PHP7, CSS3, VueJS", pNbJours: "15"},
	{pNom: "Maintenance Site", pClient: "Zenith", pEmployeur: "Blue Infinity", pAnnee :"2017", pTechno: "CSCart, PHP7, CSS3, JqueryUI, webpack", pNbJours: "5"},
	{pNom: "Site E-Commerce", pClient: "Attitude Bio", pEmployeur: "Blue Infinity", pAnnee :"2017", pTechno: "CSCart, PHP7, CSS3, JqueryUI, Git, XML", pNbJours: "45"},	
	{pNom: "Maintenance Site Compo", pClient: "Japan Tobacco", pEmployeur: "Blue Infinity", pAnnee :"2018", pTechno: "PHP5, CSS2, SQLite, SVN, gulp", pNbJours: "3"},
	{pNom: "Maintenance Site", pClient: "Romande Energie", pEmployeur: "Blue Infinity", pAnnee :"2018", pTechno: "Joomla, PHP5, CSS3, JqueryUI, Vagrant, grunt, MariaDB, less", pNbJours: "10"},
	{pNom: "Caleendrier de l'Avent", pClient: "Romande Energie", pEmployeur: "Blue Infinity", pAnnee :"2018", pTechno: "Joomla, PHP5, CSS3, JqueryUI, GoogleAPI, gulp", pNbJours: "15"},
	{pNom: "Bibliotheque Medias", pClient: "Romande Energie", pEmployeur: "Blue Infinity", pAnnee :"2018", pTechno: "Joomla, PHP5, CSS3, JqueryUI, GoogleAPI, gulp", pNbJours: "15"},	
	{pNom: "Maintenance Site Commerce", pClient: "Carand'Ache", pEmployeur: "Blue Infinity", pAnnee :"2018", pTechno: "PrestaShop, MariaDB, PHP5, CSS3, JqueryUI", pNbJours: "10"},
	{pNom: "Refonte Site Vitrine", pClient: "Carand'Ache", pEmployeur: "Blue Infinity", pAnnee :"2018", pTechno: "WordPress, CSS3, Sass, JqueryUI, grunt", pNbJours: "10"},
	{pNom: "Maintenance Sites", pClient: "EasyFlirt", pEmployeur: "2L Multimedia", pAnnee :"2019", pTechno: "Zend, JqueryUI, PostGreSQL, Git", pNbJours: "80"},
	{pNom: "Plateform API JS", pClient: "EasyFlirt", pEmployeur: "2L Multimedia", pAnnee :"2020", pTechno: "NodeJS, Adonis, CSS3, ECMAScript, GraphQL, Apollo, API", pNbJours: "20"},
	{pNom: "Migration ERP", pClient: "Resistarc", pEmployeur: "Resistarc", pAnnee :"2022", pTechno: "Produflex, Windows, Excel, Windev", pNbJours: "30"},
	{pNom: "Geo", pClient: "Perso", pEmployeur: "Perso", pAnnee :"2023", pTechno: "Dataviz, D3JS, VanillaJS, MariaDB, CSS3, Laravel, geojson, json, topojson, QGis", pNbJours: "80"},
	{pNom: "Histoire", pClient: "Perso", pEmployeur: "Perso", pAnnee :"2023", pTechno: "Dataviz, PHP8, D3JS, VanillaJS, MariaDB, CSS3, Laravel, React, json", pNbJours: "20"},
	{pNom: "Site IRNC", pClient: "IRNC", pEmployeur: "Perso", pAnnee :"2024", pTechno: "Drupal, Docker, CSS3, PostGreSQL", pNbJours: "10"},
  ]
  
  //console.log(myProjects)
  let tabAnneesAll = [];
  let tabTechno = {};
  let tabTechnoSum = {};
  let tabTechnoNb = {};
  myProjects.forEach((proj) => {
  
	let technos = proj.pTechno.split(',')
	let annee = parseInt(proj.pAnnee)
	tabAnneesAll.push(annee);
	
	technos.forEach((tech) => {
		let nomTechno = tech.trim();
		if(!tabTechnoSum[nomTechno]){
			tabTechnoSum[nomTechno] = 0;
		}
		tabTechnoSum[nomTechno] += annee;
		if(!tabTechnoNb[nomTechno]){
			tabTechnoNb[nomTechno] = 0;
		}
		tabTechnoNb[nomTechno] += 1;
	})
  });
  
  // Calcul range scale pour interpolator
  let range = d3.extent(tabAnneesAll)
  const getcolor = d3.scaleSequential(d3.interpolateRgbBasis(["green", "yellow", "red"])).domain(range); // OK
  
  function getTechColor(techName) {
	let moy = tabTechnoSum[techName] / tabTechnoNb[techName];
	return getcolor(moy);
  }
  
  
  // tous les termes
  let myText = "";
  myProjects.forEach((proj) => {
    myText += ', ' + proj.pTechno;  
  });
  
	
  //console.log(myText)
  
  
  function WordCloud(text, {
	  size = group => group.length, // Given a grouping of words, returns the size factor for that word
	  word = d => d, // Given an item of the data array, returns the word
	  marginTop = 0, // top margin, in pixels
	  marginRight = 0, // right margin, in pixels
	  marginBottom = 0, // bottom margin, in pixels
	  marginLeft = 0, // left margin, in pixels
	  width = 300, // outer width, in pixels
	  height = 250, // outer height, in pixels
	  maxWords = 200, // maximum number of words to extract from the text
	  fontFamily = "sans-serif", // font family
	  fontScale = 15, // base font size
	  fill = d => getTechColor(d), // text color, can be a constant or a function of the word
	  padding = 0, // amount of padding between the words (in pixels)
	  rotate = 0, // a constant or function to rotate the words
	  invalidation // when this promise resolves, stop the simulation
  } = {}) {
	  const words = typeof text === "string" ? text.split(/\W+/g) : Array.from(text);
	  
	  
	  
	  const data = d3.rollups(words, size, w => w)
		.sort(([, a], [, b]) => d3.descending(a, b))
		.slice(0, maxWords)
		.map(([key, size]) => ({text: word(key), size}));
	  
	  //console.log(size)
	  
	  const svg = d3.create("svg")
		  .attr("viewBox", [0, 0, width, height])
		  .attr("width", width)
		  .attr("font-family", fontFamily)
		  .attr("text-anchor", "middle")
		  .attr("style", "max-width: 100%; height: auto; height: intrinsic;");

	  const g = svg.append("g").attr("transform", `translate(${marginLeft},${marginTop})`);

	  const cloud = d3Cloud()
		  .size([width - marginLeft - marginRight, height - marginTop - marginBottom])
		  .words(data)
		  .padding(padding)
		  .rotate(rotate)
		  .font(fontFamily)
		  .fontSize(d => Math.sqrt(d.size) * fontScale)
		  .on("word", ({size, x, y, rotate, text}) => {
			g.append("text")
				.datum(text)
				.attr("font-size", size)
				.attr("fill", fill)
				.attr("transform", `translate(${x},${y}) rotate(${rotate})`)
				.text(text);
		  });

	  cloud.start();
	  invalidation && invalidation.then(() => cloud.stop());
	  return svg.node();
  }
  
  
  var svg = WordCloud(myText, 
	{
		width: 500, 
		height: 300,
		rotate: () => (~~(Math.random() * 6) - 3) * 30
	}
  )
  
  
  document.getElementById("cloud").append(svg);

  const leg = legend({color: getcolor, title: "NUAGE TECHNO (Taille par nb projets, couleur pour annee moy.)", tickFormat: "", width: 320})
  document.getElementById("cloud").append(leg)
  /*
  var layout = d3Cloud()
    .size([500, 500])
    .words([
      "Hello", "world", "normally", "you", "want", "more", "words",
      "than", "this"].map(function(d) {
      return {text: d, size: 10 + Math.random() * 90, test: "haha"};
    }))
    .padding(5)
    .rotate(function() { return ~~(Math.random() * 2) * 90; })
    .font("Impact")
    .fontSize(function(d) { return d.size; })
    .on("end", draw);

  layout.start();

  function draw(words) {
    d3.select("body").append("svg")
      .attr("width", layout.size()[0])
      .attr("height", layout.size()[1])
    .append("g")
      .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
    .selectAll("text")
      .data(words)
    .enter().append("text")
      .style("font-size", function(d) { return d.size + "px"; })
      .style("font-family", "Impact")
      .attr("text-anchor", "middle")
      .attr("transform", function(d) {
        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
      })
      .text(function(d) { return d.text; });
  }
  */

  </script>
</body>
</html>
					